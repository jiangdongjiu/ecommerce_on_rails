<!DOCTYPE html>
<html>
  <head>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FreshFood</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>


    <section class="section">
      <div class="container">
        <nav class="navbar is-fixed-top has-shadow" role="navigation" aria-label="main navigation">


            <div class="navbar-brand">
              <a class="navbar-item" href=<%= root_path %>>
                <%= image_tag("logo.png") %>
              </a>

              <a role="button is-active" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>

            <div id="navbarBasicExample" class="navbar-menu">
              <div class="navbar-start">
                <a class="navbar-item" href=<%= root_path %>>
                  <strong>FreshFood</strong>
                </a>
                <a class="navbar-item" href="/products/family_friendly">
                  Family Friendly
                </a>
                <a class="navbar-item" href="/products/easy_fast">
                  Easy Fast
                </a>
                <a class="navbar-item" href="/products/meat_veggies">
                  Meat&Veggies
                </a>
                <a class="navbar-item" href="/products/vegetarian">
                  Vegetarian
                </a>

                <div class="navbar-item has-dropdown is-hoverable">
                  <a class="navbar-link">
                    More
                  </a>

                  <div class="navbar-dropdown">
                    <a class="navbar-item" href=<%= permalink_path('about_us') %>>
                      About
                    </a>
                    <a class="navbar-item" href=<%= permalink_path('contact_us') %>>
                      Contact
                    </a>
                  </div>
                </div>
              </div>

              <div class="navbar-end">
                <div class="navbar-item has-dropdown is-hoverable">
                  <a class="navbar-link">
                    Cart
                  </a>

                  <div class="navbar-dropdown is-right">
                    <% cart.each do |product| %>
                      <div class="navbar-item" >
                        <%= product.name %>
                        <div class="ml-2"><%= link_to('❌', cart_path(product), method: :delete) %></div>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
        </nav>
        <br/>
        <%= form_with(url: search_products_path, method: :get, local: true) do %>
              <div class="field is-grouped mb-5">
                <div class="control is-expended">
                  <%= text_field_tag(:keywords, nil, class: "input", placeholder: "search for products") %>
                </div>
                <div class="select is-expended">
                  <%= select_tag(:category, options_for_select([['All Categories', nil],
                                                                ['Family Friendly', 12],
                                                                ['Easy Fast', 11],
                                                                ['Meat&Veggies', 10],
                                                                ['Vegetarian', 13]])) %>
                </div>
                <div class="select is-expended">
                  <%= select_tag(:time, options_for_select([['All Times', 'All Times'],
                                                            ['New', 'New'],
                                                            ['Recently Updated', 'Recently Updated']])) %>
                </div>
                <div class="control">
                  <%= submit_tag("Search", class: "button is-primary") %>
                </div>
              </div>
        <% end %>
        <%# <%= debug session[:shopping_cart] %>
        <%# <%= debug cart %>
        <%# <% debug session[:shopping_cart] %>

        <% if flash[:notice] %>
            <div class="notification is-primary is-light">
              <%= flash[:notice] %>
            </div>
        <% end %>

        <%= yield %>
      </div>
    </section>
  </body>
</html>
